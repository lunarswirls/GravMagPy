! ============================================================
! gravmag_sphere input (Option B polygon + depth format)
! Units / conventions:
!   - longitudes: degrees in [-180, 180)
!   - latitudes : degrees in [-90, 90]
!   - depths    : km below surface (positive downward)
!   - magnetization magnitude: A/m
!   - inc/dec: spherical angles of magnetization in planet-fixed XYZ:
!       +Z = geographic north
!       +X = toward Sun / subsolar direction (lon=0, lat=0)
!       +Y completes RH system
!     inc = angle from +XY plane toward +Z (deg)
!     dec = azimuth in XY plane from +X toward +Y (deg)
!
! Output (from your rewritten Fortran) is:
!   Bx, By, Bz in nT and Btot = |B| in nT
! ============================================================

Sphere wcirc  Remanent for Moon  Z component c1 (SANITY: radial, centered at (0,0))
! Card 1: title string (free format)

-5.0  -5.0   0.1   0.1   0.0  100  100
! Card 2: observation grid definition
!   lat0_deg  lon0_deg  dlat_deg  dlon_deg  elvo_km   nlat  nlon
!   lat0,lon0  : lower-left corner of grid (deg)
!   dlat,dlon  : grid spacing (deg)
!   elvo_km    : observation altitude above surface (km); 0 => on surface
!   nlat,nlon  : number of grid points in latitude/longitude
!
! Here: grid spans lat [-5, 4.9] and lon [-5, 4.9] with 0.1° spacing.

2 16 16 1
! Card 3: quadrature / integration control
!   nr  ntheta  nphi  nblim
!   nr,ntheta,nphi : Gauss-Legendre nodes in radius/lat/lon for volume integral
!   nblim:
!     1 => fixed rectangular limits are NOT used in Option-B;
!          (kept for legacy compatibility; your Option-B reader uses Card 7 polygon)
!     0 => polygon mode (recommended)
!
! NOTE: In your current Option-B implementation, Card 7 is always polygon+depth,
!       so nblim is effectively ignored for geometry.

0.1  1.50   -2.0   2.0   0.080
! Card 4: legacy/compatibility card (not physically used in Option B)
!   htheta  hphi  phi1  phi2  rho_dummy
!   (retained so old inputs still parse; your Option-B code reads but does not use it)

2 1 0.2  90.0  0.0
! Card 5: field + magnetization definition (Option B semantics)
!   ifield  nrem  M_amp_Apm  inc_deg  dec_deg
!   ifield : field selector (kept for compatibility; output is always Bx By Bz |B|)
!   nrem   : must be 1 for magnetics in your Option-B code
!   M_amp_Apm : magnetization magnitude [A/m]
!   inc_deg   : inclination [deg] (from XY plane toward +Z)
!   dec_deg   : declination [deg] (from +X toward +Y in XY plane)
!
! Here: inc=+90° means magnetization points along +Z (purely “radial” at (0,0) only
! in the sense of being vertical in the global frame; it does NOT follow local er).

0 2 1  0.0000  0.0000
! Card 6: legacy output/options (mostly ignored in Option B)
!   iprint  nfile  nopt  first  conint
!   nfile : if nonzero, write output table (your code checks this)
!   others: retained for old workflow

5  1.0  5.0
! Card 7 (Option B): polygon + depth range
!   npts  depth_top_km  depth_bot_km
!   npts         : number of polygon vertices that follow
!   depth_top_km : top of magnetized layer (km below surface)
!   depth_bot_km : bottom of magnetized layer (km below surface)
!
! Here: a layer from 1 km to 5 km depth.

-2.0 -2.0
 2.0 -2.0
 2.0  2.0
-2.0  2.0
-2.0 -2.0
! Polygon vertices: (lat_deg, lon_deg) pairs
! Must define a closed loop; last vertex repeats first vertex to close the polygon.
! This is a grid-aligned square centered at (0,0) spanning lat/lon [-2, +2].